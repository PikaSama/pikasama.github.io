{"title":"Inside主题进阶配置 | 附加篇","date":"2020-08-15T08:57:42.000Z","date_formatted":{"ll":"2020年8月15日","L":"2020/08/15","MM-DD":"08-15"},"thumbnail":"https://cdn.jsdelivr.net/gh/PikaSama/shelter-images@1.2.12/images/inside.webp","link":"posts/inside-configuration-extra","comments":true,"updated":"2020-12-06T09:11:42.306Z","content":"<h2 id=\"前言\">前言<a title=\"#前言\" href=\"#前言\"></a></h2>\n<p>这是上一篇文章的续篇，用于介绍一些我给主题做的拓展功能</p>\n<p><strong>注意：本文中的代码均不是死的，需要根据你的情况自己修改</strong></p>\n<p><strong>阅读这篇文章，你可能需要一定的知识储备：</strong></p>\n<ol>\n<li>HTML基础</li>\n<li>JavaScript基础</li>\n<li>CSS基础</li>\n</ol>\n<p>不用害怕，因为我也是菜逼～</p>\n<a id=\"more\"></a>\n<h2 id=\"自定义函数\">自定义函数<a title=\"#自定义函数\" href=\"#自定义函数\"></a></h2>\n<p>博客的自定义资源均由<code>scriptLoader-xxxx.js</code>进行加载</p>\n<p>而<code>scriptLoader.js</code>的作用就是保证我自定义的，需要全局使用的函数能被预先加载，从而继续在指定种类的页面加载指定资源</p>\n<p>以下是我自定义的一些函数，在这篇文章中需要用到</p>\n<figure class=\"highlight javascript\"><figcaption><span>customFuncs.js</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"> Author: Zorin</span></span><br><span class=\"line\"><span class=\"comment\"> Github: https://github.com/PikaSama</span></span><br><span class=\"line\"><span class=\"comment\"> License: GPL-3.0 License</span></span><br><span class=\"line\"><span class=\"comment\"> Description: Personal functions.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"comment\">// 延迟函数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">delay</span>(<span class=\"params\">ms,func</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> func == <span class=\"string\">&quot;function&quot;</span>)&#123;</span><br><span class=\"line\">                func();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            resolve();</span><br><span class=\"line\">        &#125;,ms);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 动态文字，简化版</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dynamicType</span>(<span class=\"params\">arr,ts,bs</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> options = &#123;</span><br><span class=\"line\">        strings: arr,</span><br><span class=\"line\">        startDelay: <span class=\"number\">0</span>,</span><br><span class=\"line\">        backDelay: <span class=\"number\">1000</span>,</span><br><span class=\"line\">        typeSpeed: ts || <span class=\"number\">80</span>,</span><br><span class=\"line\">        backSpeed: bs || <span class=\"number\">60</span>,</span><br><span class=\"line\">        loop: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        showCursor: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        contentType: <span class=\"string\">&#x27;html&#x27;</span>,</span><br><span class=\"line\">        smartBackspace: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> type = <span class=\"keyword\">new</span> Typed(<span class=\"string\">&quot;#typedtext&quot;</span>,options);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 通知系统，简化版</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">customNtf</span>(<span class=\"params\">options</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> myntf = <span class=\"keyword\">new</span> NotificationFx(&#123;</span><br><span class=\"line\">        wrapper: <span class=\"built_in\">document</span>.body,</span><br><span class=\"line\">        message: options.text,</span><br><span class=\"line\">        layout: options.layout,</span><br><span class=\"line\">        effect: options.effect,</span><br><span class=\"line\">        type: <span class=\"string\">&#x27;error&#x27;</span>,</span><br><span class=\"line\">        ttl: options.ttl,</span><br><span class=\"line\">        onClose : <span class=\"function\">() =&gt;</span> <span class=\"literal\">false</span>,</span><br><span class=\"line\">        onOpen : <span class=\"function\">() =&gt;</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    myntf.show();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 公告通知</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">announce</span>(<span class=\"params\">css,ver,lc,ld</span>) </span>&#123;</span><br><span class=\"line\">    css.append(<span class=\"string\">&#x27;&lt;link id=&quot;jelly&quot; href=&quot;//cdn.jsdelivr.net/gh/PikaSama/shelter-images@&#x27;</span> + ver + <span class=\"string\">&#x27;/static/ns-style-growl.css&quot; rel=&quot;stylesheet&quot;&gt;&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">await</span> delay(<span class=\"number\">1000</span>);</span><br><span class=\"line\">    customNtf(&#123;</span><br><span class=\"line\">        text: <span class=\"string\">&#x27;&lt;p&gt;🔔【公告】——2020.8.3&lt;br /&gt;叮咚！博客有文章更新啦~&lt;br /&gt;更新列表：&lt;br /&gt;&lt;a href=&quot;/posts/inside-configuration&quot;&gt;[持续更新]Inside主题进阶配置&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;快去看看吧~&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;a id=&quot;confirm&quot; href=&quot;&#x27;</span> + lc + <span class=\"string\">&#x27;#cofirmed&quot;&gt;确认公告&lt;/a&gt;&lt;/p&gt;&#x27;</span>,</span><br><span class=\"line\">        layout: <span class=\"string\">&#x27;growl&#x27;</span>,</span><br><span class=\"line\">        effect: <span class=\"string\">&#x27;jelly&#x27;</span>,</span><br><span class=\"line\">        ttl: <span class=\"number\">10000</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    confirmAnnounce(ld);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 确认公告按钮</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">confirmAnnounce</span>(<span class=\"params\">ld</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 监听按钮点击事件</span></span><br><span class=\"line\">    $(<span class=\"string\">&quot;a#confirm&quot;</span>).click(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 关闭公告通知</span></span><br><span class=\"line\">        $(<span class=\"string\">&quot;.ns-box.ns-growl.ns-effect-jelly.ns-type-error.ns-show .ns-close&quot;</span>).click();</span><br><span class=\"line\">        <span class=\"comment\">// 写入已读日期</span></span><br><span class=\"line\">        <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;announcement_date&quot;</span>, ld);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 新人查阅指南后的通知</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">checkedNotification</span>(<span class=\"params\">css,ver</span>) </span>&#123;</span><br><span class=\"line\">    css.append(<span class=\"string\">&#x27;&lt;link id=&quot;jelly&quot; href=&quot;//cdn.jsdelivr.net/gh/PikaSama/shelter-images@&#x27;</span> + ver + <span class=\"string\">&#x27;/static/ns-style-growl.css&quot; rel=&quot;stylesheet&quot;&gt;&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">await</span> delay(<span class=\"number\">1600</span>);</span><br><span class=\"line\">    customNtf(&#123;</span><br><span class=\"line\">        text: <span class=\"string\">&#x27;&lt;p&gt;🔔【消息】&lt;br /&gt;恭喜～你已经正式进入了避难所(Shelter)～&lt;br /&gt;页面将在5秒后跳转至首页，请耐心等待～&lt;br /&gt;无法跳转？试试&amp;nbsp;&amp;nbsp;&lt;a href=&quot;/&quot;&gt;手动跳转&lt;/a&gt;&lt;/p&gt;&#x27;</span>,</span><br><span class=\"line\">        layout: <span class=\"string\">&#x27;growl&#x27;</span>,</span><br><span class=\"line\">        effect: <span class=\"string\">&#x27;jelly&#x27;</span>,</span><br><span class=\"line\">        ttl: <span class=\"number\">5500</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">await</span> delay(<span class=\"number\">5000</span>);</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.location.href=<span class=\"string\">&quot;/&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"通知系统\">通知系统<a title=\"#通知系统\" href=\"#通知系统\"></a></h2>\n<p>这个我是在一个约5年前的css+js项目里看到的(难以想象5年前的项目竟然这么好康)</p>\n<p>项目地址：<a href=\"http://tympanus.net/Development/NotificationStyles/index.html\" target=\"_blank\">NotificationStyles</a></p>\n<!--more-->\n<p><img src=\"https://cdn.jsdelivr.net/gh/PikaSama/shelter-images@1.3.16/images/ns-preview.png\" alt=\"avatar\" class=\"φcx\"></p>\n<p>图片预览</p>\n<p>有很多种通知样式可以选，但使用多个通知可能会造成样式的冲突。</p>\n<p>如果你发现使用多个通知会有冲突，请只引用<code>ns-default.css</code>这个样式文件，在要用到指定通知时才加载指定的样式文件。（目前暂未找到同时显示的最优解决方案，这个方法是用于解决错开显示不同种类通知造成的样式冲突）</p>\n<p>使用通知系统，需要加入以下依赖</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">plugins:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">//cdn.jsdelivr.net/gh/PikaSama/shelter-images@1.3.15/static/ns-default.css</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">//cdn.jsdelivr.net/gh/PikaSama/shelter-images@1.3.15/static/NotificationFx.js</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">//cdn.jsdelivr.net/gh/PikaSama/shelter-images@1.3.14/static/modernizr.custom.js</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">//cdn.jsdelivr.net/gh/PikaSama/shelter-images@1.3.14/static/classie.js</span></span><br></pre></td></tr></table></figure>\n<p>用法(简化后的)：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">customNtf(&#123;</span><br><span class=\"line\">    text: &#39;Hello~&#39;,</span><br><span class=\"line\">    layout: &#39;other&#39;,</span><br><span class=\"line\">    effect: &#39;thumbslider&#39;,</span><br><span class=\"line\">    ttl: 1000</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>text：通知内容</li>\n<li>layout：通知样式种类</li>\n<li>effect：样式效果</li>\n<li>ttl：通知持续时间</li>\n</ul>\n<p>上面代码的样式就是新人通知的样式，普通通知、公告的样式是<code>growl</code>样式中的<code>jelly</code>特效。</p>\n<p>如果文本内容过长或其他原因造成通知显示不够标准，需要自行修改css</p>\n<h3 id=\"新人通知\">新人通知<a title=\"#新人通知\" href=\"#新人通知\"></a></h3>\n<p>受主题群里一位大佬的启发，本来想做个新人引导的，但是找不到什么好看的样式，而且我个人也比较反感这种“被人教做事”或者说是“被强迫做事”的感觉，于是发现了通知系统之后就想着给新人发个通知行了，看不看入站指南是他们的意愿hhh</p>\n<p>识别新人的原理就是判断客户端有没有标识符，没有就推送通知，以前用的是Cookie方式，现在改为localStorage方式。（但这玩意的性能好像略低于前者）</p>\n<p>代码分为两个文件：</p>\n<ul>\n<li>ntfSystem.js：用于显示新人通知和公告</li>\n<li>ntfSystem-page.js：用于显示阅读指南后的通知(包含后文的自定义配置方面的代码)</li>\n</ul>\n<h3 id=\"公告\">公告<a title=\"#公告\" href=\"#公告\"></a></h3>\n<p>同上，公告的判断方式为：浏览者的已读日期不存在或不等于最新的公告日期，且不是新人，显示公告</p>\n<p>存储方式也是localStorage(后面的都是，只要涉及到数据的长期存储)</p>\n<p><strong>注意：该功能仅对非新人开放，要是新人看得到这通知，那不得眼花缭乱了～</strong></p>\n<p>代码过长，可通过toc按钮（右下角小圆点，展开的三条杠按钮）跳转至下一个标题</p>\n<figure class=\"highlight javascript\"><figcaption><span>ntfSystem.js</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"> Author: Zorin</span></span><br><span class=\"line\"><span class=\"comment\"> Github: https://github.com/PikaSama</span></span><br><span class=\"line\"><span class=\"comment\"> License: GPL-3.0 License</span></span><br><span class=\"line\"><span class=\"comment\"> Description: Notification system, including notification for newbie and annoucement features.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">(<span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> delay(<span class=\"number\">1000</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 新人标识</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> newv = <span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;newbie&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 页面路径</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> lc = <span class=\"built_in\">window</span>.location.pathname;</span><br><span class=\"line\">    <span class=\"comment\">// 已读公告日期</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> ad = <span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;announcement_date&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 最新公告日期</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> ld = <span class=\"string\">&quot;2020.8.3&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// 静态资源版本</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> ver = <span class=\"string\">&quot;1.3.12&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> cssPlace = $(<span class=\"string\">&quot;head&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 新人通知</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> newbientf = <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">        cssPlace.append(<span class=\"string\">&#x27;&lt;link id=&quot;thumbslider&quot; href=&quot;//cdn.jsdelivr.net/gh/PikaSama/shelter-images@&#x27;</span> + ver + <span class=\"string\">&#x27;/static/ns-style-other.css&quot; rel=&quot;stylesheet&quot;&gt;&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> delay(<span class=\"number\">1000</span>);</span><br><span class=\"line\">        customNtf(&#123;</span><br><span class=\"line\">            text: <span class=\"string\">&#x27;&lt;div class=&quot;ns-thumb&quot;&gt;&lt;img height=&quot;72px&quot; width=&quot;72px&quot; src=&quot;https://cdn.jsdelivr.net/gh/PikaSama/shelter-images@1.3.4/images/icon.png&quot;/&gt;&lt;/div&gt;&lt;div style=&quot;width:280px;&quot; class=&quot;ns-content&quot;&gt;&lt;p&gt;第一次访问博客？来看看&lt;a style=&quot;color:#1eb4f0;&quot; href=&quot;https://shelter.beaa.cn/help&quot;&gt;使用教程&lt;/a&gt;&amp;nbsp;叭~&lt;br /&gt;移动端请点击右下角的圆点打开侧边栏“&lt;span class=&quot;φbg icon-sidebar&quot;&gt;&lt;/span&gt;”&lt;br /&gt;(浏览后即可永久关闭此通知)&lt;/p&gt;&lt;/div&gt;&#x27;</span>,</span><br><span class=\"line\">            layout: <span class=\"string\">&#x27;other&#x27;</span>,</span><br><span class=\"line\">            effect: <span class=\"string\">&#x27;thumbslider&#x27;</span>,</span><br><span class=\"line\">            ttl: <span class=\"number\">10000</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"comment\">// 修改通知长度</span></span><br><span class=\"line\">        <span class=\"keyword\">await</span> delay(<span class=\"number\">600</span>);</span><br><span class=\"line\">        $(<span class=\"string\">&quot;.ns-box.ns-other.ns-effect-thumbslider.ns-type-error .ns-box-inner&quot;</span>).attr(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;width:340px;&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 显示新人通知</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (newv == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">await</span> newbientf();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 判断条件，显示公告</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((ad == <span class=\"literal\">null</span> || ad != ld) &amp;&amp; newv != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            announce(cssPlace,ver,lc,ld);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><figcaption><span>ntfSystem-page.js</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"> Author: Zorin</span></span><br><span class=\"line\"><span class=\"comment\"> Github: https://github.com/PikaSama</span></span><br><span class=\"line\"><span class=\"comment\"> License: GPL-3.0 License</span></span><br><span class=\"line\"><span class=\"comment\"> Description: An extension of ntfSystem.js.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">(<span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> delay(<span class=\"number\">1000</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 新人标识</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> neo = <span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&quot;newbie&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 页面路径</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> locate = <span class=\"built_in\">window</span>.location.pathname;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> cssPlace = $(<span class=\"string\">&quot;head&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> thumbslider = <span class=\"string\">&quot;.ns-box.ns-other.ns-effect-thumbslider.ns-type-error&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// 静态资源文件版本</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> ver = <span class=\"string\">&quot;1.3.12&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// 初始配置</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> autoNight = <span class=\"string\">&quot;0&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> defaultTheme = <span class=\"string\">&quot;0&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> defaultWidget = <span class=\"string\">&quot;0&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> sidebarBackground = <span class=\"string\">&quot;0&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> clickEffect = <span class=\"string\">&quot;0&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> live2d = <span class=\"string\">&quot;1&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> wordcountMode = <span class=\"string\">&quot;0&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> bqb = <span class=\"string\">&quot;https://cdn.jsdelivr.net/npm/alus@latest\\nhttps://cdn.jsdelivr.net/gh/MiniValine/Bilibilis@latest\\nhttps://cdn.jsdelivr.net/gh/MiniValine/twemoji@latest\\nhttps://cdn.jsdelivr.net/gh/PikaSama/blog-emoticons@1.1.2/bilibiliHotKey\\nhttps://cdn.jsdelivr.net/gh/PikaSama/blog-emoticons@1.1.2/HONKAI3-Daily\\nhttps://cdn.jsdelivr.net/gh/PikaSama/blog-emoticons@1.1.2/HONKAI3-NEWYEAR-2019\\nhttps://cdn.jsdelivr.net/gh/PikaSama/blog-emoticons@1.1.2/HONKAI3-AIChan\\nhttps://cdn.jsdelivr.net/gh/PikaSama/blog-emoticons@1.1.2/Coolapk&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> dynamicText = <span class=\"string\">&quot;0&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// 检查是否有通知阻塞</span></span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">checkedNtf</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.querySelector(thumbslider + <span class=\"string\">&quot;.ns-show&quot;</span>) != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            $(thumbslider).attr(<span class=\"string\">&quot;id&quot;</span>,<span class=\"string\">&quot;canceled&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">await</span> delay(<span class=\"number\">500</span>);</span><br><span class=\"line\">            $(thumbslider).remove();</span><br><span class=\"line\">            $(<span class=\"string\">&quot;link#thumbslider&quot;</span>).remove();</span><br><span class=\"line\">            <span class=\"keyword\">await</span> checkedNotification(cssPlace,ver);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            $(thumbslider).remove();</span><br><span class=\"line\">            $(<span class=\"string\">&quot;link#thumbslider&quot;</span>).remove();</span><br><span class=\"line\">            <span class=\"keyword\">await</span> checkedNotification(cssPlace,ver);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 新人，在入站指南页面</span></span><br><span class=\"line\">    <span class=\"comment\">// 写入标识符与默认配置文件</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (neo == <span class=\"literal\">null</span> &amp;&amp; locate == <span class=\"string\">&quot;/help&quot;</span>) &#123;</span><br><span class=\"line\">        $(<span class=\"string\">&#x27;&lt;div class=&quot;button-save&quot;&gt;&lt;span&gt;已阅&lt;i class=&quot;ri-checkbox-circle-line&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/div&gt;&#x27;</span>).insertAfter(<span class=\"string\">&quot;.φbk.φh.φz p:last&quot;</span>);</span><br><span class=\"line\">        $(<span class=\"string\">&quot;.button-save&quot;</span>).click(<span class=\"keyword\">async</span> ()=&gt;&#123;</span><br><span class=\"line\">            $(<span class=\"string\">&quot;.button-save&quot;</span>).attr(<span class=\"string\">&quot;class&quot;</span>,<span class=\"string\">&quot;button-save-disabled&quot;</span>);</span><br><span class=\"line\">            <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;newbie&quot;</span>,<span class=\"string\">&quot;0&quot;</span>);</span><br><span class=\"line\">            <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;auto_night&quot;</span>,autoNight);</span><br><span class=\"line\">            <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;default_theme&quot;</span>,defaultTheme);</span><br><span class=\"line\">            <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;default_theme_widget&quot;</span>,defaultWidget);</span><br><span class=\"line\">            <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;sidebar_widget_background&quot;</span>,sidebarBackground);</span><br><span class=\"line\">            <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;click_effect&quot;</span>,clickEffect);</span><br><span class=\"line\">            <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;live2d&quot;</span>,live2d);</span><br><span class=\"line\">            <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;wordcount_mode&quot;</span>,wordcountMode);</span><br><span class=\"line\">            <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;bqb_url&quot;</span>,bqb);</span><br><span class=\"line\">            <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&quot;dynamic_text&quot;</span>,dynamicText);</span><br><span class=\"line\">            <span class=\"keyword\">await</span> delay(<span class=\"number\">600</span>,checkedNtf);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure>\n<h3 id=\"思考\">思考<a title=\"#思考\" href=\"#思考\"></a></h3>\n<p>看到这里，你可能会发现：你这tm怎么都用的异步自执行函数啊？！</p>\n<p>是的，由于大部分代码需要延迟执行，但我又不想看到<code>setTimeout()</code>函数的瀑布流式代码，所以接触了一下异步的知识，用Promise + async/await 实现异步执行同步代码般的操作，这也是为什么我需要在文章前面先放一下我自定义的函数。</p>\n<p><code>setTimeout()</code>函数是一个定时器，可以达到延迟执行的效果，但因为是计时器，这玩意是一个像异步又不像异步的东西。为此我稍稍了解了一下js的运行机制，js解析到setTimeout()函数后会将里面的代码放入任务队列(task queue)，所有同步代码执行完后，系统会读取任务队列，看看定时器是否满足时间要求（康康到点没），满足就执行里面的代码，不满足就重复下去，这一循环成为事件循环。（event loop）</p>\n<p>所以要想靠<code>setTimeout()</code>函数延迟执行同步代码，就得写成这样</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">setTimeout</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;1 sec later.&quot;</span>);</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;2 secs later.&quot;</span>);</span><br><span class=\"line\">        <span class=\"built_in\">setTimeout</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;3 secs later.&quot;</span>);</span><br><span class=\"line\">            ...</span><br><span class=\"line\">        &#125;,<span class=\"number\">1000</span>);</span><br><span class=\"line\">    &#125;,<span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;,<span class=\"number\">1000</span>)</span><br></pre></td></tr></table></figure>\n<p>这样的方式，我不能接受！</p>\n<p>如果你想深入了解js的运行机制，具体可见此文：</p>\n<p><a href=\"http://www.ruanyifeng.com/blog/2014/10/event-loop.html\" target=\"_blank\">JavaScript 运行机制详解：再谈Event Loop</a></p>\n<h2 id=\"设置系统\">设置系统<a title=\"#设置系统\" href=\"#设置系统\"></a></h2>\n<p>每次浏览博客的时候，都得切换一下主题，因为刷新一下就莫得了。</p>\n<p>每次浏览博客的时候，点击特效，看板娘，字数统计，动态文字都tm是我主观设置出来的，很难迎合大众口味，这么死的设置，过不久我自己都要玩腻了。</p>\n<p>所以，设置系统横空出世（虽然有些花里胡哨的主题早就自带了，样式也比我好看多了，哈哈，哈哈哈，哈哈哈哈哈呜呜呜呜）</p>\n<p>这是个啥？顾名思义，就是让用户能够自定义配置文件，达到自己喜欢的浏览效果。</p>\n<p><strong>注意：该功能仅对非新人开放～</strong></p>\n<p>目前支持的设置：</p>\n<ul>\n<li>黑暗模式自动切换</li>\n<li>默认主题</li>\n<li>默认强调色</li>\n<li>侧边栏背景</li>\n<li>点击特效</li>\n<li>Live2d看板娘</li>\n<li>字数统计模式</li>\n<li>评论系统自定义表情包</li>\n<li>动态文字样式</li>\n</ul>\n<p>不过就我目前的能力来讲，涉及到调色盘的功能都是通过模拟点击事件实现的，所以你一开始浏览博客的0.x秒前都还是默认主题的。</p>\n<p>Inside主题的调色盘功能用了<code>Shadow DOM</code>来封装，所以我们才可以直接用<code>&lt;is-palette2&gt;&lt;/is-palette2&gt;</code>就能弄出调色盘</p>\n<p>不过调色盘的ShadowRoot模式设置成<code>closed</code>了，外界不能对里面进行DOM操作（不能访问）</p>\n<p>所以要在<code>themes.js</code>中把<code>attachShadow(&#123;mode:&quot;closed&quot;&#125;)</code>改为<code>attachShadow(&#123;mode:&quot;open&quot;&#125;)</code>，这样就能模拟点击事件了</p>\n<p>为了实现这个功能，代码分为以下部分</p>\n<ul>\n<li>cfg-Loader.js：用于加载用户的自定义配置</li>\n<li>cfg-Setter.js：设置页面所用到的，用于读写自定义配置</li>\n<li>cfg-Counter.js：用于加载用户对统计功能的自定义配置</li>\n<li>cfg-Minivaline.js：用于加载用户对评论表情包的自定义配置</li>\n</ul>\n<p>源码…有点长，还是放地址吧</p>\n<p><a href=\"https://cdn.jsdelivr.net/gh/pikasama/shelter-static@1/js/custom\" target=\"_blank\">shelter-static/js/custom/ - PikaSama</a></p>\n<h3 id=\"加载动画\">加载动画<a title=\"#加载动画\" href=\"#加载动画\"></a></h3>\n<p>跳转都设置页面时，会有几秒的加载动画</p>\n<p>这是用一位大佬的css项目实现的：<a href=\"https://www.cnblogs.com/henrylin/p/13124866.html\" target=\"_blank\">Win10加载动画CSS</a></p>\n<p>实现原理：设置文章页面透明度为0，约2秒后插入设置界面的内容，约1秒后设置加载动画透明度为0并删除加载动画的元素，设置文章页面透明度为1，然后再删除它的style属性（也就是说加载动画就是个幌子，让你觉得好看而已）</p>\n<h2 id=\"js压缩\">JS压缩<a title=\"#js压缩\" href=\"#js压缩\"></a></h2>\n<p>为了提升访问速度，需要对js进行压缩，这里我用的是<code>terser</code></p>\n<p>安装（全局）：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g terser</span><br></pre></td></tr></table></figure>\n<p>使用：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">terser file.js -c -m -o file.min.js --comments &quot;&#x2F;Zorin&#x2F;&quot;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>-c：压缩参数</li>\n<li>-m：简化变量名</li>\n<li>-o：输出路径</li>\n<li>–comments：需要保留的注释中的内容</li>\n</ul>\n<p>压缩出来的js都以 源文件名.min.js 为名</p>\n<p>如果要实现压缩当前目录下的所有js，可以写个shell脚本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\">rm *.min.js</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> *.js</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">  terser <span class=\"variable\">$i</span> -c -m -o <span class=\"variable\">$&#123;i%.js&#125;</span>.min.js --comments <span class=\"string\">&quot;/Zorin/&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"侧边栏\">侧边栏<a title=\"#侧边栏\" href=\"#侧边栏\"></a></h2>\n<h3 id=\"简化\">简化<a title=\"#简化\" href=\"#简化\"></a></h3>\n<p>博客的侧边栏有很多选项，但其实这挺碍眼的，所以弄了个“More”更多选项，写了个简单的淡入淡出动画，看着还行</p>\n<h3 id=\"访问统计\">访问统计<a title=\"#访问统计\" href=\"#访问统计\"></a></h3>\n<p>由于我给文章也加了访问统计，所以侧边栏的访问统计需要在非文章的页面才能加载（防止冲突，如果访问的是文章，那么文章里加载的卜算子统计也会补全侧边栏的访问统计）</p>\n<p>两者集成为一个文件<code>sidebar.js</code></p>\n<figure class=\"highlight javascript\"><figcaption><span>sidebar.js</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"> Author: Zorin</span></span><br><span class=\"line\"><span class=\"comment\"> Github: https://github.com/PikaSama</span></span><br><span class=\"line\"><span class=\"comment\"> License: GPL-3.0 License</span></span><br><span class=\"line\"><span class=\"comment\"> Description: A lightweight more-options button.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">(<span class=\"keyword\">async</span> ()=&gt;&#123;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> delay(<span class=\"number\">800</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> more = <span class=\"string\">&quot;.φeo.φbd.φj.φc.φu.φo&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> path = <span class=\"built_in\">window</span>.location.pathname.slice(<span class=\"number\">0</span>,<span class=\"number\">6</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> mode = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (path != <span class=\"string\">&quot;/posts&quot;</span>) &#123;</span><br><span class=\"line\">        $(<span class=\"string\">&quot;body&quot;</span>).append(<span class=\"string\">&#x27;&lt;script src=&quot;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt;&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    $(<span class=\"string\">&#x27;&lt;a class=&quot;φeo φbd φj φc φu φo&quot;&gt;📥 More&lt;/a&gt;&#x27;</span>).insertAfter(more + <span class=\"string\">&quot;:eq(3)&quot;</span>);</span><br><span class=\"line\">    $(<span class=\"string\">&#x27;&lt;a class=&quot;φeo φbd φj φc φu φo&quot; style=&quot;display:none;&quot; href=&quot;/abyss&quot;&gt;🖤 Abyss&lt;/a&gt;&#x27;</span>).insertAfter(more + <span class=\"string\">&quot;:eq(4)&quot;</span>);</span><br><span class=\"line\">    $(<span class=\"string\">&#x27;&lt;a class=&quot;φeo φbd φj φc φu φo&quot; style=&quot;display:none;&quot; href=&quot;/todo&quot;&gt;📃 Todo&lt;/a&gt;&#x27;</span>).insertAfter(more + <span class=\"string\">&quot;:eq(5)&quot;</span>);</span><br><span class=\"line\">    $(<span class=\"string\">&#x27;&lt;a class=&quot;φeo φbd φj φc φu φo&quot; style=&quot;display:none;&quot; href=&quot;/search&quot;&gt;🔎 Search&lt;/a&gt;&#x27;</span>).insertAfter(more + <span class=\"string\">&quot;:eq(6)&quot;</span>);</span><br><span class=\"line\">    $(more + <span class=\"string\">&quot;:eq(4)&quot;</span>).click(<span class=\"keyword\">async</span> ()=&gt;&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mode == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            mode = <span class=\"number\">1</span>;</span><br><span class=\"line\">            $(more + <span class=\"string\">&quot;:eq(5)&quot;</span>).attr(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;opacity:0;&quot;</span>);</span><br><span class=\"line\">            $(more + <span class=\"string\">&quot;:eq(6)&quot;</span>).attr(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;opacity:0;&quot;</span>);</span><br><span class=\"line\">            $(more + <span class=\"string\">&quot;:eq(7)&quot;</span>).attr(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;opacity:0;&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">await</span> delay(<span class=\"number\">200</span>);</span><br><span class=\"line\">            $(more + <span class=\"string\">&quot;:eq(5)&quot;</span>).attr(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;opacity:1;transition:all 0.5s&quot;</span>);</span><br><span class=\"line\">            $(more + <span class=\"string\">&quot;:eq(6)&quot;</span>).attr(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;opacity:1;transition:all 0.5s&quot;</span>);</span><br><span class=\"line\">            $(more + <span class=\"string\">&quot;:eq(7)&quot;</span>).attr(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;opacity:1;transition:all 0.5s&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            mode = <span class=\"number\">0</span>;</span><br><span class=\"line\">            $(more + <span class=\"string\">&quot;:eq(5)&quot;</span>).attr(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;opacity:0;transition:all 0.5s&quot;</span>);</span><br><span class=\"line\">            $(more + <span class=\"string\">&quot;:eq(6)&quot;</span>).attr(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;opacity:0;transition:all 0.5s&quot;</span>);</span><br><span class=\"line\">            $(more + <span class=\"string\">&quot;:eq(7)&quot;</span>).attr(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;opacity:0;transition:all 0.5s&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">await</span> delay(<span class=\"number\">600</span>);</span><br><span class=\"line\">            $(more + <span class=\"string\">&quot;:eq(5)&quot;</span>).attr(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;display:none;&quot;</span>);</span><br><span class=\"line\">            $(more + <span class=\"string\">&quot;:eq(6)&quot;</span>).attr(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;display:none;&quot;</span>);</span><br><span class=\"line\">            $(more + <span class=\"string\">&quot;:eq(7)&quot;</span>).attr(<span class=\"string\">&quot;style&quot;</span>,<span class=\"string\">&quot;display:none;&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure>\n<h2 id=\"后记\">后记<a title=\"#后记\" href=\"#后记\"></a></h2>\n<p>文章太短啦！</p>\n<p>是的，后续会更新的（flag+1）</p>\n<p>其实大部分内容都能在js里的注释找到，又因为我没什么时间，然后就不写了hhhh</p>\n<h2 id=\"感谢\">感谢<a title=\"#感谢\" href=\"#感谢\"></a></h2>\n<p>项目：<a href=\"http://tympanus.net/Development/NotificationStyles/index.html\" target=\"_blank\">NotificationStyles</a></p>\n<p>文章更新日期：2020.10.11 14:07</p>\n","prev":{"title":"离别，是为了更好的重逢","link":"posts/sayonara"},"next":{"title":"[持续更新]Inside主题进阶配置","link":"posts/inside-configuration"},"plink":"https://shelter.beaa.cn/posts/inside-configuration-extra/","toc":[{"id":"前言","title":"前言","index":"1"},{"id":"自定义函数","title":"自定义函数","index":"2"},{"id":"通知系统","title":"通知系统","index":"3","children":[{"id":"新人通知","title":"新人通知","index":"3.1"},{"id":"公告","title":"公告","index":"3.2"},{"id":"思考","title":"思考","index":"3.3"}]},{"id":"设置系统","title":"设置系统","index":"4","children":[{"id":"加载动画","title":"加载动画","index":"4.1"}]},{"id":"js压缩","title":"JS压缩","index":"5"},{"id":"侧边栏","title":"侧边栏","index":"6","children":[{"id":"简化","title":"简化","index":"6.1"},{"id":"访问统计","title":"访问统计","index":"6.2"}]},{"id":"后记","title":"后记","index":"7"},{"id":"感谢","title":"感谢","index":"8"}],"reward":true,"copyright":{"author":"Zorin","link":"<a href=\"https://shelter.beaa.cn/posts/inside-configuration-extra/\" title=\"Inside主题进阶配置 | 附加篇\">https://shelter.beaa.cn/posts/inside-configuration-extra/</a>","license":"<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"nofollow\" target=\"_blank\">署名-非商业性-共享方式一致</a>(CC BY-NC-SA 4.0)<br />博客除特别声明外，均采用此协议，转载请注明来源！"}}